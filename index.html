<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The world is yours.</title>
<style>
  :root{
    --bg:#000; --fg:#fff; --accent:#9900FF;
    --border:rgba(255,255,255,.14);
    --shadow:0 10px 30px rgba(0,0,0,.45);
  }
  html,body{
    height:100%; margin:0; background:var(--bg); color:var(--fg);
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text","Helvetica Neue",Helvetica,Arial,sans-serif;
    font-weight:700; -webkit-font-smoothing:antialiased; overflow:hidden;
  }
  .wrap{ position:relative; z-index:2; min-height:100%; display:grid; place-items:center; text-align:center; padding:2rem; }
  .hero{
    display:inline-block; user-select:none; pointer-events:auto;
    border:1px solid var(--border); border-radius:24px;
    padding:clamp(16px,3vw,32px) clamp(18px,4vw,52px);
    box-shadow:var(--shadow); transform-style:preserve-3d; transition:filter .15s ease;
  }
  .line{
    margin:0; letter-spacing:.2px; line-height:1.05;
    font-size:clamp(28px,6vw,72px);
    text-shadow:0 0 10px rgba(153,0,255,.18),0 0 35px rgba(153,0,255,.12);
    white-space:pre-wrap;
  }
  .accent{ color:var(--accent); }
  .cursor-glitch{
    display:inline-block; width:.55em; height:.9em; vertical-align:-0.05em; margin-left:.06em;
    background:currentColor; animation:blink 1s steps(1) infinite;
  }
  @keyframes blink{50%{opacity:0}}

  /* Slow flash for the final message */
  .flash { animation: fadePulse 2.6s ease-in-out infinite alternate; }
  @keyframes fadePulse { from { opacity: .28 } to { opacity: 1 } }

  /* Fade-to-black overlay */
  .fadeout{
    position:fixed; inset:0; background:#000; opacity:0; pointer-events:none;
    transition:opacity 1.5s ease; z-index:999;
  }
  .fadeout.active{ opacity:1; }
</style>
</head>
<body>
<div class="wrap">
  <div class="hero" id="hero" aria-live="polite" aria-atomic="true">
    <h1 class="line" id="line">
      <span>The world is </span><span class="accent">yours</span><span>.</span><span class="cursor-glitch"></span>
    </h1>
  </div>
</div>

<!-- Fade overlay -->
<div id="fade" class="fadeout"></div>

<script>
/* HERO tilt */
(function(){
  const hero=document.getElementById('hero');
  const MAX=10;
  hero.addEventListener('pointermove',(e)=>{
    const r=hero.getBoundingClientRect();
    const x=(e.clientX-(r.left+r.width/2))/(r.width/2);
    const y=(e.clientY-(r.top+r.height/2))/(r.height/2);
    const rx=(-y*MAX).toFixed(2);
    const ry=(x*MAX).toFixed(2);
    hero.style.transform=`perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg)`;
    hero.style.filter='contrast(1.08) saturate(1.08)';
  });
  hero.addEventListener('pointerleave',()=>{
    hero.style.transform='perspective(900px) rotateX(0) rotateY(0)';
    hero.style.filter='none';
  });
})();

/* RANDOM non-repeating sequence ONCE, then fade-to-black, then slow flashing final message */
(function(){
  const lineEl = document.getElementById('line');
  const CUR = '<span class="cursor-glitch"></span>';

  const msgs = [
    {text:`The world is yours.`,accent:`yours`},
    {text:`Have I led a compelling narrative?`,accent:`narrative`}
  ];

  const FINAL_LINE = `Just Win.`; // slow flashing, no cursor
  const BASE_TYPE = 80, BASE_DEL = 40, HOLD = 1200;
  const wait = ms => new Promise(r=>setTimeout(r,ms));
  const jitter = (base, spread=20) => base + Math.floor((Math.random()*spread) - spread/2);

  function parts(msg){
    const a=msg.accent, i=msg.text.indexOf(a);
    if(i<0) return [{str:msg.text,isAccent:false}];
    return [
      {str: msg.text.slice(0,i), isAccent:false},
      {str: a, isAccent:true},
      {str: msg.text.slice(i+a.length), isAccent:false}
    ];
  }
  function render(tokens, count){
    let out='', left=count;
    for(const t of tokens){
      if(left<=0) break;
      const chunk = t.str.slice(0, Math.min(left, t.str.length));
      out += t.isAccent ? `<span class="accent">${chunk}</span>` : chunk;
      left -= chunk.length;
    }
    return out + '<span class="cursor-glitch"></span>';
  }

  async function typeMsg(m){
    const tokens = parts(m);
    const n = m.text.length;
    for(let i=1;i<=n;i++){
      lineEl.innerHTML = render(tokens, i);
      await wait(jitter(BASE_TYPE));
    }
    await wait(HOLD);
    for(let i=n-1;i>=0;i--){
      lineEl.innerHTML = render(tokens, i);
      await wait(jitter(BASE_DEL));
    }
  }

  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1; i>0; i--){
      const j = (Math.random()*(i+1))|0;
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  (async function runOnceThenFlash(){
    const order = shuffle(msgs);
    for (const m of order){
      await typeMsg(m);
    }

    // Fade to black before final message
    const fade = document.getElementById('fade');
    fade.classList.add('active');
    await wait(2000); // adjust fade duration as you like

    // Show final flashing line (no cursor)
    lineEl.classList.add('flash');
    lineEl.innerHTML = FINAL_LINE;

    // Remove the overlay so the flashing text is visible
    fade.classList.remove('active');
  })();
})();
</script>
</body>
</html>
